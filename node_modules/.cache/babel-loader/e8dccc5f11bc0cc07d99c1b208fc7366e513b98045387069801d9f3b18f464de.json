{"ast":null,"code":"// Utility functions for data storage and retrieval\n\nexport const saveToLocalStorage = (key, data) => {\n  try {\n    localStorage.setItem(key, JSON.stringify(data));\n    return true;\n  } catch (error) {\n    console.error('Error saving to localStorage:', error);\n    return false;\n  }\n};\nexport const loadFromLocalStorage = (key, defaultValue = null) => {\n  try {\n    const item = localStorage.getItem(key);\n    return item ? JSON.parse(item) : defaultValue;\n  } catch (error) {\n    console.error('Error loading from localStorage:', error);\n    return defaultValue;\n  }\n};\n\n// Data migration function for categories\nexport const migrateCategories = () => {\n  const existingCategories = loadFromLocalStorage('categories');\n  if (!existingCategories || existingCategories.length === 0) {\n    // Create default categories if none exist\n    const defaultCategories = [{\n      id: 1,\n      name: 'Sub Junior',\n      order: 1\n    }, {\n      id: 2,\n      name: 'Junior',\n      order: 2\n    }, {\n      id: 3,\n      name: 'Senior',\n      order: 3\n    }];\n    saveToLocalStorage('categories', defaultCategories);\n    return defaultCategories;\n  }\n  return existingCategories;\n};\n\n// Calculate team standings based on results\nexport const calculateTeamStandings = (teams, results, pointsConfig) => {\n  // Initialize medal counts for each team\n  const teamStandings = teams.map(team => ({\n    ...team,\n    gold: 0,\n    silver: 0,\n    bronze: 0,\n    totalPoints: 0\n  }));\n\n  // Process results to count medals and points\n  results.forEach(result => {\n    result.participants.forEach(participant => {\n      // Find the student to get their team\n      const students = loadFromLocalStorage('students', []);\n      const student = students.find(s => s.chestNumber === participant.name || s.name === participant.name);\n      if (student) {\n        // Find the team in standings\n        const teamIndex = teamStandings.findIndex(t => t.name === student.team);\n        if (teamIndex !== -1) {\n          // Increment medal count based on position\n          switch (participant.position.toLowerCase()) {\n            case '1':\n            case 'first':\n            case 'gold':\n              teamStandings[teamIndex].gold += 1;\n              teamStandings[teamIndex].totalPoints += pointsConfig.gold || 10;\n              break;\n            case '2':\n            case 'second':\n            case 'silver':\n              teamStandings[teamIndex].silver += 1;\n              teamStandings[teamIndex].totalPoints += pointsConfig.silver || 7;\n              break;\n            case '3':\n            case 'third':\n            case 'bronze':\n              teamStandings[teamIndex].bronze += 1;\n              teamStandings[teamIndex].totalPoints += pointsConfig.bronze || 5;\n              break;\n          }\n        }\n      }\n    });\n  });\n\n  // Sort teams by total points (descending)\n  teamStandings.sort((a, b) => b.totalPoints - a.totalPoints);\n\n  // Add rank to each team\n  teamStandings.forEach((team, index) => {\n    team.rank = index + 1;\n  });\n  return teamStandings;\n};\n\n// Calculate top performers based on points\nexport const calculateTopPerformers = results => {\n  const performerPoints = {};\n\n  // Aggregate points for each performer\n  results.forEach(result => {\n    result.participants.forEach(participant => {\n      if (!performerPoints[participant.name]) {\n        performerPoints[participant.name] = {\n          name: participant.name,\n          totalPoints: 0,\n          programs: []\n        };\n      }\n      performerPoints[participant.name].totalPoints += participant.points || 0;\n      performerPoints[participant.name].programs.push({\n        program: result.program,\n        position: participant.position,\n        points: participant.points || 0\n      });\n    });\n  });\n\n  // Convert to array and sort by points\n  const performers = Object.values(performerPoints);\n  performers.sort((a, b) => b.totalPoints - a.totalPoints);\n\n  // Format for display (top 10)\n  return performers.slice(0, 10).map((performer, index) => {\n    var _performer$programs$;\n    return {\n      id: index + 1,\n      name: performer.name,\n      program: ((_performer$programs$ = performer.programs[0]) === null || _performer$programs$ === void 0 ? void 0 : _performer$programs$.program) || 'Various',\n      points: performer.totalPoints\n    };\n  });\n};\n\n// Initialize default data if not present\nexport const initializeDefaultData = () => {\n  // Check if we have initialized data already\n  const isInitialized = loadFromLocalStorage('initialized', false);\n  if (!isInitialized) {\n    // Initialize categories\n    migrateCategories();\n\n    // Initialize other default data\n    const defaultEvents = [{\n      id: 1,\n      name: 'Dance Competition',\n      categories: ['Sub Junior', 'Junior', 'Senior'],\n      color: {\n        r: 106,\n        g: 17,\n        b: 203\n      }\n    }];\n    const defaultTeams = [{\n      id: 1,\n      name: 'Team Alpha',\n      color: '#FF5733'\n    }];\n    const defaultPrograms = [{\n      id: 1,\n      name: 'Classical Dance',\n      type: 'Individual'\n    }];\n    const defaultPoints = {\n      gold: 10,\n      silver: 7,\n      bronze: 5\n    };\n\n    // Set default admin password\n    const defaultAdminPassword = 'admin123';\n    saveToLocalStorage('events', defaultEvents);\n    saveToLocalStorage('teams', defaultTeams);\n    saveToLocalStorage('programs', defaultPrograms);\n    saveToLocalStorage('points', defaultPoints);\n    saveToLocalStorage('adminPassword', defaultAdminPassword);\n    saveToLocalStorage('initialized', true);\n  }\n};","map":{"version":3,"names":["saveToLocalStorage","key","data","localStorage","setItem","JSON","stringify","error","console","loadFromLocalStorage","defaultValue","item","getItem","parse","migrateCategories","existingCategories","length","defaultCategories","id","name","order","calculateTeamStandings","teams","results","pointsConfig","teamStandings","map","team","gold","silver","bronze","totalPoints","forEach","result","participants","participant","students","student","find","s","chestNumber","teamIndex","findIndex","t","position","toLowerCase","sort","a","b","index","rank","calculateTopPerformers","performerPoints","programs","points","push","program","performers","Object","values","slice","performer","_performer$programs$","initializeDefaultData","isInitialized","defaultEvents","categories","color","r","g","defaultTeams","defaultPrograms","type","defaultPoints","defaultAdminPassword"],"sources":["c:/Users/SMIC_STUDIO/Desktop/MEHFIL 25 APP/src/utils/dataStorage.js"],"sourcesContent":["// Utility functions for data storage and retrieval\r\n\r\nexport const saveToLocalStorage = (key, data) => {\r\n  try {\r\n    localStorage.setItem(key, JSON.stringify(data));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error saving to localStorage:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const loadFromLocalStorage = (key, defaultValue = null) => {\r\n  try {\r\n    const item = localStorage.getItem(key);\r\n    return item ? JSON.parse(item) : defaultValue;\r\n  } catch (error) {\r\n    console.error('Error loading from localStorage:', error);\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n// Data migration function for categories\r\nexport const migrateCategories = () => {\r\n  const existingCategories = loadFromLocalStorage('categories');\r\n  \r\n  if (!existingCategories || existingCategories.length === 0) {\r\n    // Create default categories if none exist\r\n    const defaultCategories = [\r\n      { id: 1, name: 'Sub Junior', order: 1 },\r\n      { id: 2, name: 'Junior', order: 2 },\r\n      { id: 3, name: 'Senior', order: 3 }\r\n    ];\r\n    \r\n    saveToLocalStorage('categories', defaultCategories);\r\n    return defaultCategories;\r\n  }\r\n  \r\n  return existingCategories;\r\n};\r\n\r\n// Calculate team standings based on results\r\nexport const calculateTeamStandings = (teams, results, pointsConfig) => {\r\n  // Initialize medal counts for each team\r\n  const teamStandings = teams.map(team => ({\r\n    ...team,\r\n    gold: 0,\r\n    silver: 0,\r\n    bronze: 0,\r\n    totalPoints: 0\r\n  }));\r\n  \r\n  // Process results to count medals and points\r\n  results.forEach(result => {\r\n    result.participants.forEach(participant => {\r\n      // Find the student to get their team\r\n      const students = loadFromLocalStorage('students', []);\r\n      const student = students.find(s => \r\n        s.chestNumber === participant.name || \r\n        s.name === participant.name\r\n      );\r\n      \r\n      if (student) {\r\n        // Find the team in standings\r\n        const teamIndex = teamStandings.findIndex(t => t.name === student.team);\r\n        if (teamIndex !== -1) {\r\n          // Increment medal count based on position\r\n          switch (participant.position.toLowerCase()) {\r\n            case '1':\r\n            case 'first':\r\n            case 'gold':\r\n              teamStandings[teamIndex].gold += 1;\r\n              teamStandings[teamIndex].totalPoints += pointsConfig.gold || 10;\r\n              break;\r\n            case '2':\r\n            case 'second':\r\n            case 'silver':\r\n              teamStandings[teamIndex].silver += 1;\r\n              teamStandings[teamIndex].totalPoints += pointsConfig.silver || 7;\r\n              break;\r\n            case '3':\r\n            case 'third':\r\n            case 'bronze':\r\n              teamStandings[teamIndex].bronze += 1;\r\n              teamStandings[teamIndex].totalPoints += pointsConfig.bronze || 5;\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  });\r\n  \r\n  // Sort teams by total points (descending)\r\n  teamStandings.sort((a, b) => b.totalPoints - a.totalPoints);\r\n  \r\n  // Add rank to each team\r\n  teamStandings.forEach((team, index) => {\r\n    team.rank = index + 1;\r\n  });\r\n  \r\n  return teamStandings;\r\n};\r\n\r\n// Calculate top performers based on points\r\nexport const calculateTopPerformers = (results) => {\r\n  const performerPoints = {};\r\n  \r\n  // Aggregate points for each performer\r\n  results.forEach(result => {\r\n    result.participants.forEach(participant => {\r\n      if (!performerPoints[participant.name]) {\r\n        performerPoints[participant.name] = {\r\n          name: participant.name,\r\n          totalPoints: 0,\r\n          programs: []\r\n        };\r\n      }\r\n      \r\n      performerPoints[participant.name].totalPoints += participant.points || 0;\r\n      performerPoints[participant.name].programs.push({\r\n        program: result.program,\r\n        position: participant.position,\r\n        points: participant.points || 0\r\n      });\r\n    });\r\n  });\r\n  \r\n  // Convert to array and sort by points\r\n  const performers = Object.values(performerPoints);\r\n  performers.sort((a, b) => b.totalPoints - a.totalPoints);\r\n  \r\n  // Format for display (top 10)\r\n  return performers.slice(0, 10).map((performer, index) => ({\r\n    id: index + 1,\r\n    name: performer.name,\r\n    program: performer.programs[0]?.program || 'Various',\r\n    points: performer.totalPoints\r\n  }));\r\n};\r\n\r\n// Initialize default data if not present\r\nexport const initializeDefaultData = () => {\r\n  // Check if we have initialized data already\r\n  const isInitialized = loadFromLocalStorage('initialized', false);\r\n  \r\n  if (!isInitialized) {\r\n    // Initialize categories\r\n    migrateCategories();\r\n    \r\n    // Initialize other default data\r\n    const defaultEvents = [\r\n      { id: 1, name: 'Dance Competition', categories: ['Sub Junior', 'Junior', 'Senior'], color: { r: 106, g: 17, b: 203 } }\r\n    ];\r\n    \r\n    const defaultTeams = [\r\n      { id: 1, name: 'Team Alpha', color: '#FF5733' }\r\n    ];\r\n    \r\n    const defaultPrograms = [\r\n      { id: 1, name: 'Classical Dance', type: 'Individual' }\r\n    ];\r\n    \r\n    const defaultPoints = {\r\n      gold: 10,\r\n      silver: 7,\r\n      bronze: 5\r\n    };\r\n    \r\n    // Set default admin password\r\n    const defaultAdminPassword = 'admin123';\r\n    \r\n    saveToLocalStorage('events', defaultEvents);\r\n    saveToLocalStorage('teams', defaultTeams);\r\n    saveToLocalStorage('programs', defaultPrograms);\r\n    saveToLocalStorage('points', defaultPoints);\r\n    saveToLocalStorage('adminPassword', defaultAdminPassword);\r\n    saveToLocalStorage('initialized', true);\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}